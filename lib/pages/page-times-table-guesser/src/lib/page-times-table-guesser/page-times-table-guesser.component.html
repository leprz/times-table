<feature-timer #timer [timer]="120" (timesUp)="navigateToSummary()" />

<feature-exercise
  #exercise
  (answered)="score.recalculateCurrentScore()"
  (exerciseCompleted)="navigateToSummary()"
/>
<div class="page-times-table-guesser body-medium">
  <div class="page-times-table-guesser__exercise">
    <div class="page-times-table-guesser__score">
      <feature-score
        class="page-times-table-guesser__high-score"
        #score
        (currentScoreRecalculated)="keyboard.reset()"
      >
      <span class="page-times-table-guesser__score-bar page-times-table-guesser__score-bar--current-score">
        {{ score.currentScore() }}
      </span>
        @if (score.currentHighScore()) { /
          <span class="page-times-table-guesser__score-bar page-times-table-guesser__score-bar--high-score">{{
              score.currentHighScore() | formatHighScore
            }}</span>
        }
      </feature-score>
      @if (exercise.currentExercise()) {
        <span class="page-times-table-guesser__current-exercise">{{
            exercise.currentExercise() | formatEquation : keyboard.inputValue()
          }}</span>
      }
    </div>
    <ui-keyboard
      #keyboard
      (submittedNonEmpty)="exercise.answer(keyboard.inputValue())"
    ></ui-keyboard>
    <time class="page-times-table-guesser__remaining-time timer">{{ timer.remainingTime() }}s</time>
  </div>
</div>
