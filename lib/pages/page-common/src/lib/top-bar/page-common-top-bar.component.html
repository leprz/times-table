<div class="top-bar body-extra-small">
  <div class="top-bar__actions-primary">
    <span class="top-bar__action app__action-coins">
      <feature-rewards-list #featureRewardsList />
      <page-common-on-init (onInit)="featureRewardsList.loadNotCollectedYet()" />
        <a
          class="btn-icon btn-badge"
          aria-label="Otwórz listę nagród"
          [routerLink]="[links.rewards]"
        >
          <fast-svg [name]="'banknote'" />
          <feature-coins #featureCoinCollector />
          <span>{{ featureCoinCollector.coins() }}</span>
          @if (featureRewardsList.rewards$ | async; as rewards) {
            @if (rewards.count > 0) {
              <span class="badge">{{ rewards.count }}</span>
            }
          }
      </a>
    </span>
    <span class="top-bar__action app__action-high-score">
        <button class="btn-icon" disabled>
          <fast-svg [name]="'star'" />
          <span>{{ highScore() }}</span>
        </button>
    </span>
  </div>
  <button
    class="top-bar__action top-bar__action-settings btn-secondary btn-icon"
    aria-label="Otwórz ustawienia"
    (click)="settingsDialog.showModal()"
  >
    <fast-svg [name]="'settings'" />
  </button>
</div>

<ui-dialog
  [hasStickyHeader]="true"
  #settingsDialog
>
  <div appUiDialogHeader>
    @defer (when settingsDialog.isOpened()) {
      <feature-prize-create #featurePrizeCreate />
      <feature-coins #featureCoins />
      <button
        class="btn-icon"
        (click)="featurePrizeCreate.create({
        name: 'Nazwa nagrody',
        isAchieved: false,
        requiredPoints: (featureCoins.coins() ?? 0) + 50
      })"><fast-svg name="diamond"/><span>dodaj nagrodę</span></button>
    }
  </div>
  <div appUiDialogContent>
    @defer (when settingsDialog.isOpened()) {
      <page-common-prize-list></page-common-prize-list>
    }
  </div>
</ui-dialog>