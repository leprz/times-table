<div class="top-bar body-extra-small">
  <div class="top-bar__actions-primary">
    <span class="top-bar__action app__action-coins">
      <feature-rewards-list #featureRewardsList />
      <page-common-on-init (onInit)="featureRewardsList.loadNotCollectedYet()" />
        <a
          class="btn-icon btn-badge"
          aria-label="Open rewards list"
          i18n-aria-label
          [routerLink]="[links.rewards]"
        >
          <feature-coins #featureCoinCollector />
          <fast-svg [name]="'banknote'" />
          <span>{{ featureCoinCollector.coins() }}</span>
          @if (featureRewardsList.rewards$ | async; as rewards) {
            @if (rewards.count > 0) {
              <span class="badge">{{ rewards.count }}</span>
            }
          }
      </a>
    </span>
    <span class="top-bar__action">
      <ng-container uiTeleportOutlet="top-bar-action"></ng-container>
      @if(isShareButtonVisible()) {
        <button
          class="top-bar__action top-bar__action-share btn-secondary btn-icon"
          (click)="shareDialog.showModal()"
        >
          <fast-svg [name]="'megaphone'" />
        </button>
      }
    </span>
  </div>
  @if(isSettingsButtonVisible()) {
    <button
      class="top-bar__action top-bar__action-settings btn-secondary btn-icon"
      aria-label="Open settings dialog"
      i18n-aria-label
      (click)="settingsDialog.showModal()"
    >
      <fast-svg [name]="'settings'" />
    </button>
  }
  @if(isBackButtonVisible()) {
    <button
      class="top-bar__action top-bar__action-home btn-primary btn-icon"
      aria-label="Navigate to home page"
      [routerLink]="[links.home]"
    >
      <fast-svg [name]="'corner-down-left'" />
    </button>
  }
</div>
<ui-dialog
  [hasStickyHeader]="true"
  #settingsDialog
>
  <div appUiDialogHeader>
    @defer (when settingsDialog.isOpened()) {
      <feature-prize-create #featurePrizeCreate />
      <feature-coins #featureCoins />
      <button
        class="btn-icon btn-secondary"
        (click)="featurePrizeCreate.createNewPrize(featureCoins.coins() ?? 0)"
      >
        <fast-svg name="diamond" />
        <span i18n>add prize</span>
      </button>
    }
  </div>
  <div appUiDialogContent>
    @defer (when settingsDialog.isOpened()) {
      <page-common-prize-list></page-common-prize-list>
    }
  </div>
</ui-dialog>

<ui-dialog #shareDialog>
  @defer (when shareDialog.isOpened()) {
    <page-common-share-app/>
  }
</ui-dialog>